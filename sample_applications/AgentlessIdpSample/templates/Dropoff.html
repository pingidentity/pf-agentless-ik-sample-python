{% extends 'BasePage.html' %}

{% block body %}
<div class="body-container">
    <div class="ping-body-container">
        <div class="header-block">
            <div class="header">Identity Provider Sample</div>
            <div class="sub-header">Drop Off User-Session Attributes</div>
            <div class="left-header">
                <a href={{configureUrl}}>Configuration</a>
            </div>
        </div>
        {%
        if showData is not none:
        %}
        <div class="row dropoff-container">
            <div class="column request-container">
                <p class="text-label">Reference ID IdP Adapter Request</p>
                <p class="text-value">POST {{dropoffEndpoint}}</p>
                <p>
                    <a id="show_raw_request_link"
                       onclick="javascript:toggleShowRaw('raw_request_textarea', 'show_raw_request_link');">
                        Show raw
                    </a>
                </p>
                <p>
							<textarea id="raw_request_textarea"
                                      class="code-view"
                                      rows="15"
                                      cols="60"
                                      style="display:none"
                                      readonly>{{rawRequest}}</textarea>
                </p>
                <p class="text-label">User-Session Attributes</p>
                <p>
							<textarea id="request_attributes"
                                      class="code-view"
                                      rows="10"
                                      cols="60"
                                      readonly>{{userAttributes}}</textarea>
                </p>
            </div>
            <div class="column response-container">
                <p class="text-label">Reference ID IdP Adapter Response</p>
                <p class="text-value">
                    {{httpStatus}}
                </p>
                <p>
                    <a id="show_raw_response_link"
                       onclick="javascript:toggleShowRaw('raw_response_textarea', 'show_raw_response_link');">
                        Show raw
                    </a>
                </p>
                <p>
							<textarea id="raw_response_textarea"
                                      class="code-view"
                                      rows="15"
                                      cols="60"
                                      style="display:none"
                                      readonly>{{rawResponse}}</textarea>
                </p>
                <p class="text-label">Reference ID </p>
                <p class="text-value">{{REF}}</p>
            </div>
        </div>
        <div class="bottom-button-container">
            <form method="POST" action={{resumeUrl}}>
                <input type="hidden" id="resumePath" name="resumePath" value={{resumePath}}>
                <input type="hidden" id="REF" name="REF" value={{REF}}>
                <input class="table-button" id="ok_button" name="submit" type="submit" value="OK"/>
            </form>
        </div>
        {%
        else
        %}
        <div class="solo-text-container">
            <p class="solo-text">State from the previous request has been invalidated. Please restart the flow.</p>
        </div>
        {%
        endif
        %}
        <div class="ping-link-fragment">{{resumePath}}</div>
        <div class="start-over-link-container">
            <a href={{ssoUrl}}>Start Over</a>
        </div>
    </div>
    <div class="ping-footer-container">
        <div class="ping-footer">
            <div class="ping-credits"></div>
            <div class="ping-copyright">
                Copyright Â© 2003-2020. Ping Identity Corporation. All rights reserved.
            </div>
        </div>
    </div>
</div>
{% endblock %}